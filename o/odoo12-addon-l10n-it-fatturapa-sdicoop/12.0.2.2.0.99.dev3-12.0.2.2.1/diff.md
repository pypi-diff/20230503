# Comparing `tmp/odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3-py3-none-any.whl.zip` & `tmp/odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 27030 bytes, number of entries: 20
--rw-r--r--  2.0 unx     3293 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/README.rst
--rw-r--r--  2.0 unx       88 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/__init__.py
--rw-r--r--  2.0 unx      667 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/__manifest__.py
--rw-r--r--  2.0 unx      356 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/data/sdi_channel_data.xml
--rw-r--r--  2.0 unx     1380 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/i18n/it.po
--rw-r--r--  2.0 unx     1108 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/i18n/l10n_it_fatturapa_sdicoop.pot
--rw-r--r--  2.0 unx       93 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/models/__init__.py
--rw-r--r--  2.0 unx      503 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/models/sdi_channel.py
--rw-r--r--  2.0 unx       76 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      586 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/static/description/icon.png
--rw-r--r--  2.0 unx    12536 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/static/description/index.html
--rw-r--r--  2.0 unx      134 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/tests/__init__.py
--rw-r--r--  2.0 unx     1212 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/tests/test_account_invoice.py
--rw-r--r--  2.0 unx     2367 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/tests/test_notification.py
--rw-r--r--  2.0 unx     5419 b- defN 23-Apr-27 05:00 odoo/addons/l10n_it_fatturapa_sdicoop/tests/data/IT05979361218_001.xml
--rw-r--r--  2.0 unx     4044 b- defN 23-Apr-27 05:03 odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-27 05:03 odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Apr-27 05:03 odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2332 b- defN 23-Apr-27 05:03 odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/RECORD
-20 files, 45746 bytes uncompressed, 22966 bytes compressed:  49.8%
+Zip file size: 27278 bytes, number of entries: 20
+-rw-r--r--  2.0 unx     3293 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/README.rst
+-rw-r--r--  2.0 unx       88 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/__init__.py
+-rw-r--r--  2.0 unx      667 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/__manifest__.py
+-rw-r--r--  2.0 unx      356 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/data/sdi_channel_data.xml
+-rw-r--r--  2.0 unx     1380 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/i18n/it.po
+-rw-r--r--  2.0 unx     1108 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/i18n/l10n_it_fatturapa_sdicoop.pot
+-rw-r--r--  2.0 unx       93 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/models/__init__.py
+-rw-r--r--  2.0 unx      503 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/models/sdi_channel.py
+-rw-r--r--  2.0 unx       76 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      586 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/static/description/icon.png
+-rw-r--r--  2.0 unx    12536 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/static/description/index.html
+-rw-r--r--  2.0 unx      134 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/tests/__init__.py
+-rw-r--r--  2.0 unx     1212 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/tests/test_account_invoice.py
+-rw-r--r--  2.0 unx     4955 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/tests/test_notification.py
+-rw-r--r--  2.0 unx     5419 b- defN 23-May-03 17:18 odoo/addons/l10n_it_fatturapa_sdicoop/tests/data/IT05979361218_001.xml
+-rw-r--r--  2.0 unx     4036 b- defN 23-May-03 17:18 odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-03 17:18 odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-May-03 17:18 odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2300 b- defN 23-May-03 17:18 odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/RECORD
+20 files, 48294 bytes uncompressed, 23278 bytes compressed:  51.8%
```

## zipnote {}

```diff
@@ -42,20 +42,20 @@
 
 Filename: odoo/addons/l10n_it_fatturapa_sdicoop/tests/test_notification.py
 Comment: 
 
 Filename: odoo/addons/l10n_it_fatturapa_sdicoop/tests/data/IT05979361218_001.xml
 Comment: 
 
-Filename: odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/METADATA
+Filename: odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/METADATA
 Comment: 
 
-Filename: odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/WHEEL
+Filename: odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/WHEEL
 Comment: 
 
-Filename: odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/top_level.txt
+Filename: odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/RECORD
+Filename: odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/l10n_it_fatturapa_sdicoop/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 #  Copyright 2022 Simone Rubino - TAKOBI
 #  License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 {
     'name': 'ITA - Fattura elettronica - Supporto SDICoop',
-    'version': '12.0.2.2.0',
+    'version': '12.0.2.2.1',
     'category': 'Localization/Italy',
     'summary': 'Invio fatture elettroniche tramite SDICoop',
     'author': 'TAKOBI, Odoo Community Association (OCA)',
     'website': 'https://github.com/OCA/l10n-italy'
                '/tree/12.0/l10n_it_fatturapa_sdicoop',
     'license': 'AGPL-3',
     'depends': [
```

## odoo/addons/l10n_it_fatturapa_sdicoop/tests/test_notification.py

```diff
@@ -1,27 +1,36 @@
 #  Copyright 2022 Simone Rubino - TAKOBI
 #  License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 from odoo.addons.l10n_it_fatturapa_in.tests.fatturapa_common import (
     FatturapaCommon,
 )
-from odoo.tests import new_test_user
+from odoo.tests import new_test_user, SavepointCase
 
 
-class TestBillNotification (FatturapaCommon):
+class TestBillNotification (FatturapaCommon, SavepointCase):
 
-    def setUp(self):
-        super().setUp()
-        self.notified_user = new_test_user(
-            self.env,
+    @classmethod
+    def setUpClass(cls):
+        super().setUpClass()
+        cls.notified_user = new_test_user(
+            cls.env,
             login='Notify E-bill',
         )
-        self.sdicoop_channel = self.env.ref(
+        cls.not_notified_user = new_test_user(
+            cls.env,
+            login='Do not Notify E-bill',
+        )
+        cls.sdicoop_channel = cls.env.ref(
             'l10n_it_fatturapa_sdicoop.sdi_channel_sdicoop',
         )
+        cls.channel_received_e_bill = \
+            cls.env.ref('l10n_it_sdi_channel.sdi_channel_e_bill_received')
+        cls.attachment_received_e_bill = \
+            cls.env.ref('l10n_it_sdi_channel.e_bill_received')
 
     def test_e_bill_created_notify(self):
         """
         When an E-bill is received,
         the followers of the SdI channel are notified.
         """
         # Arrange: Set the channel in the company,
@@ -53,20 +62,78 @@
 
         # Assert: The SdI channel's follower is following the E-bill
         self.assertIn(
             notified_partner,
             attachment.message_partner_ids,
         )
         # There is a message of subtype E-bill received
-        received_e_bill_subtype = self.env.ref(
-            'l10n_it_sdi_channel.e_bill_received',
-        )
         messages = attachment.message_ids
         received_e_bill_message = messages.filtered(
-            lambda m: m.subtype_id == received_e_bill_subtype
+            lambda m: m.subtype_id == self.attachment_received_e_bill
         )
         self.assertEqual(len(received_e_bill_message), 1)
         # The message notifies the SdI channel's follower
         self.assertIn(
             notified_partner,
             received_e_bill_message.needaction_partner_ids,
         )
+
+    def test_e_bill_created_no_notify(self):
+        """
+        When an E-bill is received,
+        the channel followers that do not have the 'E-bill received' subtype
+        are not notified.
+        """
+        # Arrange: Set the channel in the company,
+        # and a follower for the channel
+        company = self.env.user.company_id
+        not_notified_partner = self.not_notified_user.partner_id
+        company.sdi_channel_id = self.sdicoop_channel
+        all_subtypes, internal_subtypes, external_subtypes = \
+            self.env['mail.message.subtype'].default_subtypes(
+                self.sdicoop_channel._name,
+            )
+        self.sdicoop_channel.message_subscribe(
+            partner_ids=not_notified_partner.ids,
+            subtype_ids=(all_subtypes - self.channel_received_e_bill).ids,
+        )
+        # pre-condition: the Partner is following the SdI Channel,
+        # but not the E-bill Received Subtype
+        self.assertIn(
+            not_notified_partner,
+            company.sdi_channel_id.message_partner_ids,
+        )
+        received_e_bill_followers = self.sdicoop_channel.message_follower_ids \
+            .filtered(
+                lambda f: self.channel_received_e_bill in f.subtype_ids
+            ) \
+            .mapped('partner_id')
+        self.assertNotIn(
+            not_notified_partner,
+            received_e_bill_followers,
+        )
+
+        # Act: Receive the E-bill
+        file_name = 'IT05979361218_001.xml'
+        file_path, file_content = self.getFile(
+            file_name,
+            module_name='l10n_it_fatturapa_sdicoop',
+        )
+        attachment = self.sdicoop_channel.receive_fe(
+            {
+                file_name: file_content,
+            },
+            {},
+        )
+
+        # Assert: There is a message of subtype E-bill received,
+        # but the partner is not following it
+        messages = attachment.message_ids
+        received_e_bill_message = messages.filtered(
+            lambda m: m.subtype_id == self.attachment_received_e_bill
+        )
+        self.assertEqual(len(received_e_bill_message), 1)
+        # The message notifies the SdI channel's follower
+        self.assertNotIn(
+            not_notified_partner,
+            received_e_bill_message.needaction_partner_ids,
+        )
```

## Comparing `odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/METADATA` & `odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo12-addon-l10n-it-fatturapa-sdicoop
-Version: 12.0.2.2.0.99.dev3
+Version: 12.0.2.2.1
 Summary: Invio fatture elettroniche tramite SDICoop
 Home-page: https://github.com/OCA/l10n-italy/tree/12.0/l10n_it_fatturapa_sdicoop
 Author: TAKOBI, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/RECORD` & `odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,20 +1,20 @@
 odoo/addons/l10n_it_fatturapa_sdicoop/README.rst,sha256=-8KsGOsibWP6bEfmI3CGtgFV5kO7DWu13Sd7hdM3MIA,3293
 odoo/addons/l10n_it_fatturapa_sdicoop/__init__.py,sha256=Vy7u65fus3WfU5OkSe5piYt3Li69VlAoj9RFIfvxm3Y,88
-odoo/addons/l10n_it_fatturapa_sdicoop/__manifest__.py,sha256=dLQiBoErgtnYM_f9Xw0S71HIK_tpRqZOVvUYVhAp2aw,667
+odoo/addons/l10n_it_fatturapa_sdicoop/__manifest__.py,sha256=0uXNaFEER5BJqxk6pD8-Y-Ns9JNS1SPlukSi2oglYyE,667
 odoo/addons/l10n_it_fatturapa_sdicoop/data/sdi_channel_data.xml,sha256=B16kRf-44zKIA8SWjjEhWkEvhSM9TehC6QHng3LH5VU,356
 odoo/addons/l10n_it_fatturapa_sdicoop/i18n/it.po,sha256=PO934oBbzLwh3GL4OI_-h3TWeH4rxWM-xTezWbCY3b8,1380
 odoo/addons/l10n_it_fatturapa_sdicoop/i18n/l10n_it_fatturapa_sdicoop.pot,sha256=qMYyBMI2V0rq0xj1zGQ5GgyOu9UCq_v_FcXigg3EhNE,1108
 odoo/addons/l10n_it_fatturapa_sdicoop/models/__init__.py,sha256=Voj1k_MrMQq8Sfn2AIiLOF3I76y9E_AsVTLONVPg5rs,93
 odoo/addons/l10n_it_fatturapa_sdicoop/models/sdi_channel.py,sha256=mdT2hpx5xNNbiK5f2sSywHsPcD__aL8vCl3nhMuWo14,503
 odoo/addons/l10n_it_fatturapa_sdicoop/readme/CONTRIBUTORS.rst,sha256=oIzikxXKOvWqDOj44ny9excNKHjlxI7GMq9iVsyC84M,76
 odoo/addons/l10n_it_fatturapa_sdicoop/readme/DESCRIPTION.rst,sha256=yp-ia4B4r-WWStxlQFwuqgws98qng7thKNSFMRZfT0U,586
 odoo/addons/l10n_it_fatturapa_sdicoop/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/l10n_it_fatturapa_sdicoop/static/description/index.html,sha256=venevHMWOZUMNx6eSoSaRB_mQOgD6q6I9f6sM7ZKb94,12536
 odoo/addons/l10n_it_fatturapa_sdicoop/tests/__init__.py,sha256=tj1GL2LTB3j-XY_RonaV_rfnV00qTLmaJ3Gm2RhI_-A,134
 odoo/addons/l10n_it_fatturapa_sdicoop/tests/test_account_invoice.py,sha256=nQ9klF0rHPuMcFroqP0AsX09QGYmmg_fXqVbFALwjHw,1212
-odoo/addons/l10n_it_fatturapa_sdicoop/tests/test_notification.py,sha256=m1oh-a4dBn-w-CO8bkRVQLlZWClz0FYFFEZIZ8TjCQQ,2367
+odoo/addons/l10n_it_fatturapa_sdicoop/tests/test_notification.py,sha256=mSpF8CNY7FXvhP5W_aRgbwkHqQtn89NoNMzV2Q5oHUI,4955
 odoo/addons/l10n_it_fatturapa_sdicoop/tests/data/IT05979361218_001.xml,sha256=kW1q3kGqGyB-pO4Nzt7S6Q3y8wE0timpVgp2cGzG2EM,5419
-odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/METADATA,sha256=vn_x2A0GOfUw449uMgWg6f-GBCUupyioN-c-WUAv9FQ,4044
-odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.0.99.dev3.dist-info/RECORD,,
+odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/METADATA,sha256=WjWYQQrEl9YCmQvKLsioyeiSGBLNCqbQ7zWH9P0oClQ,4036
+odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo12_addon_l10n_it_fatturapa_sdicoop-12.0.2.2.1.dist-info/RECORD,,
```

